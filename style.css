/* Contribution Calendar */
.calendar-grid { display:flex; gap:6px; align-items:flex-start; overflow:auto; padding:6px 0; }
.calendar-week { display:flex; flex-direction:column; gap:4px; }
.calendar-week .contrib-cell { width:14px; height:14px; margin:2px; border-radius:3px; transition: transform 0.12s ease, outline 0.12s ease; }
#contribCalendar { width:100%; overflow:auto; padding:6px 12px; box-sizing:border-box; }
.contrib-cell {
  width: 10px;
  height: 10px;
  border-radius: 2px;
  background: #133d2b;
  transition: background 0.2s;
}
.chart-title + #calendarCommitCount { text-align:left; margin-left:46px; }
.contrib-row { display:flex; align-items:center; gap:12px; margin-bottom:6px; }
.contrib-row span { width:36px; display:inline-block; text-align:right; color:#aaffcc; font-size:0.95em; }
.contrib-row > div { margin-left:6px; display:flex; gap:3px; overflow:auto; }
.contrib-cell { margin:0 3px; }
.chart-card { cursor: grab; }
.chart-card.dragging { opacity: 0.85; transform: scale(1.02); z-index: 60; transition: transform 160ms ease, opacity 160ms ease; }
.chart-card.drag-over { box-shadow: 0 12px 40px #00ff8844; }
.chart-card.placeholder { outline: 2px dashed #00ff88; transform: translateY(-6px); transition: all 140ms ease; box-shadow: 0 6px 24px #00ff8833; }
/* ensure chart containers are positioned so the handle can be absolute */
.chart-container { position: relative; }
/* Drag handle */
.drag-handle {
  position: absolute;
  top: 8px;
  left: 8px; /* move to top-left to avoid interfering with chart type dropdown */
  padding: 6px 8px;
  cursor: grab;
  color: #aaffcc;
  font-size: 0.95rem;
  background: rgba(10,30,20,0.35);
  border-radius: 8px;
  z-index: 40;
  user-select: none;
}
.drag-handle:active { cursor: grabbing; }
.drag-handle:hover { transform: scale(1.04); background: rgba(12,40,24,0.5); box-shadow: 0 6px 18px #00ff8833; transition: transform 120ms ease, box-shadow 120ms ease; }
.contrib-cell[data-count="0"] { background: #133d2b; }
.contrib-cell[data-count="1"] { background: #1e6d3a; }
.contrib-cell[data-count="2"] { background: #27b36a; }
.contrib-cell[data-count="3"] { background: #00ff88; }
.contrib-cell[data-count="4"] { background: #b6ffb6; }
.contrib-cell[data-count="5"] { background: #e6ffe6; }
.contrib-cell:hover {
  outline: 1.5px solid #00ff88;
  z-index: 2;
}
.chart-title {
  font-size: 1.08rem;
  color: #b6ffb6;
  margin-bottom: 8px;
  margin-top: 8px;
  font-weight: 600;
  letter-spacing: 0.2px;
  text-shadow: 0 1px 8px #00ff8855;
}

/*
Cool data ideas you can add:
 - Total commits (requires extra API calls per repo)
 - Most active days/times (commit history)
 - Contribution calendar (like GitHub's green squares)
 - Top topics/tags used in repos
 - Most forked/starred repo overall
 - Average repo size or age
 - Most common license
 - Most used frameworks (parse package.json, requirements.txt, etc)
 - Issue/PR stats (open/closed, response time)
 - Collaborators (most frequent co-contributors)
*/
/* Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Background + Fonts */
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #0a1a13;
  color: #e6ffe6;
  text-align: center;
  min-height: 100vh;
  padding: 0;
  overflow-x: hidden;
}

/* Header */

h1 {
  font-size: 2.5rem;
  color: #b6ffb6;
  margin-bottom: 20px;
  letter-spacing: 1px;
  font-weight: 700;
  text-shadow: 0 2px 16px #0f3d2e99, 0 1px 0 #1e2e1e;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5em;
}

.icon {
  font-size: 2.2rem;
  filter: drop-shadow(0 0 8px #00ff88cc);
}

h2 {
  margin-top: 30px;
  font-size: 1.3rem;
  color: #aaffcc;
  text-shadow: 0 1px 8px #0f3d2e55;
}

/* Input + Button */

.input-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  margin-bottom: 18px;
}

.input-row #githubToken { width: 320px; }

#clearTokenBtn { cursor: pointer; }
#fetchProgress { min-height: 18px; }

input {
  padding: 12px 18px;
  width: 420px;
  border: 2px solid #1e3d2f;
  border-radius: 10px;
  outline: none;
  font-size: 1.05rem;
  background: #0f2a1eaa;
  color: #e6ffe6;
  box-shadow: 0 2px 12px #00ff8855;
  transition: border 0.3s, box-shadow 0.3s, background 0.3s;
}

/* Remember-for-session compact label */
.remember-row {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  border-radius: 6px;
  background: transparent;
  color: #cffff0;
  font-size: 0.95rem;
  white-space: nowrap;
}
.remember-row input[type="checkbox"]{ width: 18px; height: 18px; margin: 0; }

/* Cancel fetch button small style */
#cancelFetchBtn { cursor: pointer; box-shadow: 0 2px 10px #0f3d2e55; }

input:focus {
  border-color: #00ff88;
  box-shadow: 0 0 0 2px #00ff88cc;
  background: #133d2b;
}

button {
  padding: 12px 28px;
  background: linear-gradient(90deg, #00ff88 0%, #0a3d2e 100%);
  color: #0a1a13;
  border: none;
  border-radius: 10px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 2px 12px #00ff8855;
  transition: background 0.3s, color 0.3s, box-shadow 0.3s;
  letter-spacing: 0.5px;
}

button:hover {
  background: linear-gradient(90deg, #0a3d2e 0%, #00ff88 100%);
  color: #e6ffe6;
  box-shadow: 0 4px 24px #00ff88cc;
}

/* Charts */

.main-glass {
  background: rgba(10, 40, 25, 0.82);
  border-radius: 24px;
  box-shadow: 0 8px 40px #00ff8840, 0 1.5px 0 #00ff88;
  max-width: 1160px;
  margin: 60px auto 40px auto;
  padding: 40px 36px 32px 36px;
  backdrop-filter: blur(8px);
  border: 1.5px solid #00ff8840;
}


.charts-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 18px;
  margin-top: 30px;
}

.chart-container {
  flex: 1 1 calc(33.33% - 24px);
  min-width: 220px;
  max-width: 360px;
  margin: 0;
  padding: 12px 12px 12px 12px;
  background: rgba(20, 50, 30, 0.92);
  border-radius: 16px;
  box-shadow: 0 4px 24px #00ff8822, 0 1.5px 0 #00ff88;
  border: 1.5px solid #00ff8840;
  transition: box-shadow 0.3s;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 460px;
}

/* If a card has no legend, let its chart expand to visually fill the space
   while keeping card height consistent with other cards */
.chart-container.no-legend canvas {
  height: 320px !important;
  max-height: 380px !important;
}

.chart-container .card-legend { margin-top: 12px; }
/* calendar grid for GitHub-style contributions */
.chart-card.placeholder { outline: 2px dashed #00ff88; transform: translateY(-6px); min-height:48px; }
.chart-container.fullwidth { width: 100%; max-width: 1100px; }

/* Modal for token consent */
.modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display:none; align-items:center; justify-content:center; z-index:120; }
.modal { background: rgba(8,24,16,0.95); border-radius:10px; padding:18px; max-width:520px; color:#dfffe0; box-shadow:0 8px 40px #0008; border:1px solid #0f3d2e; }
.modal h3 { margin-bottom:8px; color:#bfffd0; }
.modal p { font-size:0.95rem; color:#cfeee0; }
.modal .actions { display:flex; gap:10px; justify-content:flex-end; margin-top:12px; }
.modal .btn { padding:8px 12px; border-radius:8px; cursor:pointer; }
.modal .btn.confirm { background:#00b86c; color:#072216; border:none; }
.modal .btn.cancel { background:transparent; border:1px solid #2d6b4a; color:#aaffcc; }
.chart-container:hover {
  box-shadow: 0 8px 32px #00ff88cc, 0 1.5px 0 #00ff88;
}

.chart-container canvas {
  width: 100% !important;
  height: 260px !important;
  max-width: 420px;
  max-height: 320px;
}

.chart-type-controls {
  margin: 0 auto 10px auto;
  text-align: right;
  max-width: 700px;
  color: #aaffcc;
  font-size: 1.05rem;
}

/* hide chart cards until repo list is fetched */
.charts-hidden .chart-card { display: none !important; }

.card-legend {
  margin-top:10px;
  font-size:0.95rem;
  color:#b6ffb6;
  display:flex;
  flex-direction:row;
  gap:10px;
  align-items:center;
  justify-content:center;
  flex-wrap:wrap;
}
.card-legend .legend-item { display:flex; gap:8px; align-items:center; justify-content:flex-start; }
.card-legend .color-swatch { width:14px; height:14px; border-radius:3px; box-shadow:0 1px 4px #0006; flex:0 0 auto; }

#analyzeBtn[disabled] { opacity:0.6; cursor:not-allowed; }
#analyzeSpinner { color:#aaffcc; font-size:1.1rem; }

.chart-individual-control {
  margin-bottom: 6px;
  text-align: right;
  width: 100%;
  color: #aaffcc;
  font-size: 0.98rem;
}

select {
  background: #0f2a1e;
  color: #e6ffe6;
  border: 1.5px solid #00ff88;
  border-radius: 6px;
  padding: 3px 10px;
  font-size: 1rem;
  margin-left: 4px;
  margin-right: 2px;
  outline: none;
  transition: border 0.2s, box-shadow 0.2s;
}
select:focus {
  border-color: #00ffcc;
  box-shadow: 0 0 0 2px #00ff88cc;
}

/* Responsive */

@media (max-width: 900px) {
  .main-glass {
    max-width: 98vw;
    padding: 18px 2vw 18px 2vw;
  }
  .charts-row {
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }
  .chart-container {
    width: 98vw;
    max-width: 99vw;
    min-width: 0;
    padding: 10px 2vw 10px 2vw;
  }
  input {
    width: 160px;
  }
}

@media (max-width: 600px) {
  .main-glass {
    margin: 18px auto 10px auto;
    padding: 10px 2vw 10px 2vw;
  }
  .input-row {
    flex-direction: column;
    gap: 8px;
  }
  input {
    width: 98vw;
    max-width: 99vw;
    margin-bottom: 0;
  }
  button {
    width: 100%;
  }
}
